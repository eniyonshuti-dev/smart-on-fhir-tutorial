<script src="https://cdn.jsdelivr.net/npm/fhirclient@latest/build/fhir-client.js"></script>
<script>
  const CLIENT_ID = "ba92e811-144a-412c-ac69-2a0cdd1abc9f";
  const REDIRECT  = "https://eniyonshuti-dev.github.io/smart-on-fhir-tutorial/example-smart-app/";

  const q = new URLSearchParams(location.search);
  FHIR.oauth2.authorize({
    clientId: CLIENT_ID,
    redirectUri: REDIRECT,
    iss: q.get("iss"),
    launch: q.get("launch"),
    scope: [
      "launch","launch/patient",
      "openid","profile","fhirUser",
      // patient-level
      "patient/Patient.read","patient/Observation.read",
      "patient/MedicationRequest.read","patient/Condition.read",
      "patient/Encounter.read","patient/AllergyIntolerance.read",
      // user-level (covers servers that issue user/* for provider apps)
      "user/Patient.read"
    ].join(" ")
  });
</script>
