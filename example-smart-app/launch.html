<script src="https://cdn.jsdelivr.net/npm/fhirclient@latest/build/fhir-client.js"></script>
<script>
  const CLIENT_ID = "ba92e811-144a-412c-ac69-2a0cdd1abc9f"; // your Provider app client_id
  const REDIRECT  = "https://eniyonshuti-dev.github.io/smart-on-fhir-tutorial/example-smart-app/"; // trailing slash

  // Read iss & launch from the EHR launch URL
  const params = new URLSearchParams(window.location.search);
  const iss    = params.get("iss");
  const launch = params.get("launch");

  FHIR.oauth2.authorize({
    clientId: CLIENT_ID,
    redirectUri: REDIRECT,
    iss,
    launch,
    scope: [
      "launch",                // <-- add this
      "launch/patient",
      "openid","profile","fhirUser",
      "patient/Patient.read",
      "patient/AllergyIntolerance.read",
      "patient/MedicationRequest.read",
      "patient/Observation.read",
      "patient/Condition.read",
      "patient/Encounter.read"
    ].join(" ")
  });
</script>
